<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1000"> <!-- Фиксированный размер для всех устройств -->
    <title>Soundly App</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- СТИЛИ -->
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/content.css">
    <link rel="stylesheet" href="css/player.css">
    <link rel="stylesheet" href="css/checkout.css">
    <link rel="stylesheet" href="css/plans.css">
</head>
<body>

    <!-- ВЕРХНЯЯ ПАНЕЛЬ -->
    <div class="top-header">
        
        <div class="header-logo-area">
            <!-- КНОПКА (нажимается только тут) -->
            <div class="logo-click-zone" onclick="openPage(null, 'page-home')">
                <img src="Interface/Icons/Top_ui/Logo.png" class="app-logo" alt="Soundly" onerror="this.style.display='none'">
                <span class="app-name">SOUNDLY</span>
            </div>
        </div> 

        <div class="header-content">
            <div class="header-search">
                <div class="search-input-wrapper">
                    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                    <input type="text" placeholder="Search Soundly">
                </div>
            </div>

            <div class="header-right">
                <div class="credits-pill">
                    <img src="Interface/Icons/Top_ui/Plus.png" class="plus-icon" alt="+" onclick="openPage(null, 'page-plans')" onerror="this.style.display='none'">
                    <span class="credits-count" id="user-credits">0</span>
                    <span class="credits-label">credits</span>
                </div>
                <button class="icon-btn">?</button>
                <img id="user-avatar" class="user-avatar" src="Interface/Icons/default_avatar.png" alt="User" onclick="openPage(null, 'page-profile')">
            </div>
        </div>
    </div>

    <!-- ЦЕНТР -->
    <div class="middle-container">
        
        <!-- БОКОВАЯ ПАНЕЛЬ -->
        <div class="sidebar">
            <div class="nav-section main-nav">
                <!-- Я УБРАЛ СЛОВО active В СТРОКЕ НИЖЕ -->
                <div class="nav-item" onclick="openPage(this, 'page-browse')"><span>Browse</span></div>
                <div class="nav-item" onclick="openPage(this, 'page-create')"><span>Create</span></div>
            </div>
            <!-- ... (дальше код Library остается как был) ... -->
            <div class="nav-section">
                <div class="section-title">Library</div>
                <div class="nav-item" onclick="openPage(this, 'page-sounds')"><span>Sounds</span></div>
                <div class="nav-item" onclick="openPage(this, 'page-plugins')"><span>Apps & Plugins</span><span class="badge-new">New</span></div>
                <div class="nav-item" onclick="openPage(this, 'page-stacks')"><span>Stacks</span></div>
            </div>
            <div class="nav-section">
                <div class="section-header">
                    <div class="section-title">Collections</div><div class="add-icon">+</div>
                </div>
                <div class="nav-item" onclick="selectItem(this)">
                    <img src="Interface/Icons/LeftSide_ui/AllCollections.png" class="nav-icon" onerror="this.style.display='none'"><span>All Collections</span>
                </div>
                <div class="nav-item" onclick="selectItem(this)">
                    <img src="Interface/Icons/LeftSide_ui/Likes.png" class="nav-icon" onerror="this.style.display='none'"><span>Likes</span>
                </div>
            </div>
        </div>

        <div class="main-content">
            
            <!-- ГЛАВНАЯ (БАННЕРЫ) -->
            <div id="page-home" class="content-frame">
                <div class="banners-container">
                    <div class="ad-card telegram-card">
                        <img src="Interface/Pictures/Telegram_ads.png" alt="Telegram Ads" class="ad-image tg-img">
                        <a href="https://t.me/SoundlyApp" target="_blank" class="ad-btn">Open Telegram</a>
                    </div>
                    <div class="ad-card discord-card">
                        <img src="Interface/Pictures/Discord_ads.png" alt="Discord Ads" class="ad-image ds-img">
                        <a href="#" class="ad-btn">Open Discord</a>
                    </div>
                </div>
            </div>

            <!-- ТАРИФЫ -->
            <div id="page-plans" class="content-frame" style="display: none;">
                <div class="plans-container">
                    <div class="plans-title">Plans & Pricing</div>
                    <div class="plans-subtitle">The right plan is as important as the right sound. Pick yours.</div>

                    <div class="plans-wrapper">
                        <!-- Starter -->
                        <div class="plan-card">
                            <div class="plan-header">
                                <div class="plan-name">Starter</div>
                                <div class="plan-desc">For light monthly use.</div>
                                <div class="plan-price" id="price-Starter">Loading...</div>
                            </div>
                            <div class="plan-features">
                                <div class="feature-row"><div class="dot"></div>50 Credits</div>
                                <div class="feature-row"><div class="dot"></div>Download samples</div>
                                <div class="feature-row"><div class="dot"></div>Access Desktop App</div>
                            </div>
                            <div class="plan-actions">
                                <button class="btn-try" onclick="openCheckout('Starter')">Subscribe now</button>
                            </div>
                        </div>

                        <!-- Pro -->
                        <div class="plan-card pro">
                            <div class="plan-header">
                                <div class="plan-name">Pro</div>
                                <div class="plan-desc">For regular weekly sessions.</div>
                                <div class="plan-price" id="price-Pro">Loading...</div>
                            </div>
                            <div class="plan-features">
                                <div class="feature-row"><div class="dot"></div>100 Credits</div>
                                <div class="feature-row"><div class="dot"></div>AI Search</div>
                                <div class="feature-row"><div class="dot"></div>Access Desktop App</div>
                                <div class="feature-row"><div class="dot"></div>Exclusive plugins</div>
                            </div>
                            <div class="plan-actions">
                                <button class="btn-try" onclick="openCheckout('Pro')">Subscribe now</button>
                            </div>
                        </div>

                        <!-- Elite -->
                        <div class="plan-card">
                            <div class="plan-header">
                                <div class="plan-name">Elite</div>
                                <div class="plan-desc">For power users.</div>
                                <div class="plan-price" id="price-Elite">Loading...</div>
                            </div>
                            <div class="plan-features">
                                <div class="feature-row"><div class="dot"></div>200 Credits</div>
                                <div class="feature-row"><div class="dot"></div>AI Search</div>
                                <div class="feature-row"><div class="dot"></div>All Plugins & Stacks</div>
                            </div>
                            <div class="plan-actions">
                                <button class="btn-try" onclick="openCheckout('Elite')">Subscribe now</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ПРОФИЛЬ -->
            <div id="page-profile" class="content-frame" style="display: none;">
                <div class="profile-page-content">
                    <img id="profile-big-avatar" class="profile-pic-big" src="Interface/Icons/default_avatar.png" alt="Profile">
                    <div id="profile-username" class="profile-username">@loading</div>
                </div>
            </div>

            <!-- Другие -->
            <div id="page-browse" class="content-frame" style="display: none;"></div>
            <div id="page-sounds" class="content-frame" style="display: none;"></div>
            <div id="page-create" class="content-frame" style="display: none;"></div>
            <div id="page-plugins" class="content-frame" style="display: none;"></div>
            <div id="page-stacks" class="content-frame" style="display: none;"></div>
            <div id="page-collections" class="content-frame" style="display: none;"></div>
            <div id="page-likes" class="content-frame" style="display: none;"></div>

        </div>
    </div>

    <!-- НИЗ -->
    <div class="bottom-player">
        <div class="progress-line"><div class="progress-fill" style="width: 0%;"></div></div>
        <div class="player-controls">
            <div class="ctrl-btn small" style="background: #888; width: 12px; height: 12px; mask: url(Interface/icons/Player/prev.png); -webkit-mask: url(Interface/icons/Player/prev.png);"></div>
            <div class="ctrl-btn main" style="background: #fff; width: 14px; height: 14px; mask: url(Interface/icons/Player/play.png); -webkit-mask: url(Interface/icons/Player/play.png);"></div>
            <div class="ctrl-btn small" style="background: #888; width: 12px; height: 12px; mask: url(Interface/icons/Player/next.png); -webkit-mask: url(Interface/icons/Player/next.png);"></div>
        </div>
        <div class="player-info">
            <div class="track-cover-placeholder" style="opacity: 0;"></div>
            <div class="track-text">
                <div class="track-title" id="track-name">Select a sound</div>
                <div class="track-tags" id="track-meta">...</div>
            </div>
        </div>
        <div class="player-volume">
            <div class="vol-icon" style="background: #888; width: 14px; height: 14px; mask: url(Interface/icons/Player/volume.png); -webkit-mask: url(Interface/icons/Player/volume.png);"></div>
            <div class="volume-track-container" id="vol-container">
                <div class="vol-bg-line"></div>
                <div class="vol-fill-line" id="vol-fill" style="width: 80%;"></div>
                <div class="vol-knob" id="vol-knob" style="left: 80%;"></div>
            </div>
        </div>
    </div>
    
    <!-- МОДАЛКА ОПЛАТЫ -->
    <div id="payment-overlay" class="modal-overlay" onclick="closeModal()">
        <div class="payment-modal" onclick="event.stopPropagation()">
            <div class="close-cross" onclick="closeModal()">✕</div>
            
            <div class="modal-header">
                <div class="modal-title" id="modal-title-text">...</div> 
                <div class="modal-subtitle" id="modal-subtitle-text">...</div>
            </div>
            
            <div class="payment-methods-row">
                <div class="pay-option-card active" onclick="selectPay(this)">
                    <div class="pay-price" id="price-val-month">...</div>
                    <div class="pay-period">1 месяц</div>
                    <div class="pay-subtext yellow">попробовать</div>
                </div>

                <div class="pay-option-card" onclick="selectPay(this)">
                    <div class="pay-price" id="price-val-year">...</div>
                    <div class="pay-period">1 год</div>
                    <div class="pay-subtext blue" id="save-val-year">...</div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn-modal cancel" onclick="closeModal()">Отмена</button>
                <button class="btn-modal pay" onclick="goToCheckoutPage()">Оплатить</button>
            </div>
        </div>
    </div>

    <!-- === БЕЛАЯ СТРАНИЦА (CHECKOUT) === -->
<div id="page-checkout">
    <!-- Фейковая шапка для сохранения позиции логотипа -->
    <div class="checkout-header-dummy">
        <div class="header-logo-area">
            <div class="logo-click-zone">
                <img src="Interface/Icons/Top_ui/Logo.png" class="app-logo" alt="Soundly">
                <span class="app-name">SOUNDLY</span>
            </div>
        </div> 
    </div>
    
    <!-- Тут можно будет добавить контент оплаты, пока пусто -->
</div>

<!-- Библиотеки Google Firebase (Обязательно для защиты главной страницы) -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>

    <script src="script.js"></script>
</body>
</html>